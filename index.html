<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectTrack | Single-File Deployment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const firebaseConfig = {
  apiKey: "AIzaSyDESSKXtqR3D00-b_M7oBqbqOJ6GIzydJk",
  authDomain: "project-timeline-track.firebaseapp.com",
  projectId: "project-timeline-track",
  storageBucket: "project-timeline-track.firebasestorage.app",
  messagingSenderId: "910675827292",
  appId: "1:910675827292:web:8bebef089cc5d6b3e4e499"
};
        const APP_ID = "production-tracker-01";
        const isConfigValid = firebaseConfig.apiKey !== "YOUR_API_KEY";

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, addDoc, updateDoc, doc, serverTimestamp, query, orderBy, arrayUnion } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        let app, auth, db;
        if (isConfigValid) {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
        }

        const Icons = {
            Layout: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>,
            Plus: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>,
            Loader: () => <svg className="animate-spin" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>
        };

        const App = () => {
            const [projects, setProjects] = React.useState([]);
            const [checkpoints] = React.useState(["Backlog", "Design", "Dev", "UAT", "Live"]);
            const [loading, setLoading] = React.useState(isConfigValid);
            const [error, setError] = React.useState(null);

            React.useEffect(() => {
                if (!isConfigValid) return;

                const init = async () => {
                    try {
                        await signInAnonymously(auth);
                        const q = query(collection(db, 'artifacts', APP_ID, 'public', 'data', 'projects'), orderBy('createdAt', 'desc'));
                        onSnapshot(q, (snap) => {
                            setProjects(snap.docs.map(d => ({ id: d.id, ...d.data() })));
                            setLoading(false);
                            setError(null);
                        }, (err) => {
                            setError("Firestore Error: " + err.message);
                            setLoading(false);
                        });
                    } catch (err) {
                        setError("Auth Error: " + err.message);
                        setLoading(false);
                    }
                };
                init();
            }, []);

            if (!isConfigValid) return <div className="p-20 text-center font-bold">Paste your Firebase Config in index.html</div>;
            if (loading) return <div className="h-screen flex items-center justify-center"><Icons.Loader /></div>;

            return (
                <div className="min-h-screen">
                    <nav className="bg-white border-b p-4 flex justify-between items-center">
                        <div className="flex items-center gap-2 font-black text-xl"><Icons.Layout /> ProjectTrack</div>
                        {error && <div className="text-red-500 text-xs font-mono max-w-xs">{error}</div>}
                    </nav>
                    
                    <div className="p-8 flex gap-4 overflow-x-auto">
                        {checkpoints.map(cp => (
                            <div key={cp} className="min-w-[250px] bg-slate-100 p-4 rounded-xl">
                                <h3 className="text-xs font-black uppercase text-slate-400 mb-4">{cp}</h3>
                                <div className="space-y-3">
                                    {projects.filter(p => p.status === cp).map(p => (
                                        <div key={p.id} className="bg-white p-4 rounded-lg shadow-sm border border-slate-200">
                                            <p className="font-bold text-sm">{p.name}</p>
                                            <p className="text-[10px] text-slate-400 uppercase mt-1">{p.version}</p>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>

                    <button 
                        onClick={() => {
                            const name = prompt("Name:");
                            if (name) addDoc(collection(db, 'artifacts', APP_ID, 'public', 'data', 'projects'), {
                                name, version: 'v1.0', status: 'Backlog', createdAt: serverTimestamp()
                            }).catch(e => alert(e.message));
                        }}
                        className="fixed bottom-8 right-8 bg-indigo-600 text-white p-4 rounded-full shadow-lg"
                    >
                        <Icons.Plus />
                    </button>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
